syntax = "proto3";

package zmk.lighting;

// --- RGB Underglow ---

message HsbColor {
    uint32 h = 1; // Hue: 0-359
    uint32 s = 2; // Saturation: 0-100
    uint32 b = 3; // Brightness: 0-100
}

message RgbUnderglowState {
    bool on = 1;
    HsbColor color = 2;
    uint32 effect = 3;
    uint32 speed = 4;
}

message SetRgbUnderglowStateRequest {
    oneof field {
        bool on = 1;
        HsbColor color = 2;
        uint32 effect = 3;
    }
}

// --- Backlight ---

message BacklightState {
    bool on = 1;
    uint32 brightness = 2;
}

message SetBacklightStateRequest {
    oneof field {
        bool on = 1;
        uint32 brightness = 2;
    }
}

// --- Aggregated Request / Response / Notification ---

message Request {
    oneof request_type {
        bool get_rgb_underglow_state = 1;
        SetRgbUnderglowStateRequest set_rgb_underglow_state = 2;
        bool get_backlight_state = 3;
        SetBacklightStateRequest set_backlight_state = 4;
        bool save_state = 5;
    }
}

message Response {
    oneof response_type {
        RgbUnderglowState get_rgb_underglow_state = 1;
        bool set_rgb_underglow_state = 2;
        BacklightState get_backlight_state = 3;
        bool set_backlight_state = 4;
        bool save_state = 5;
    }
}

message Notification {
    oneof notification_type {
        RgbUnderglowState rgb_underglow_state_changed = 1;
        BacklightState backlight_state_changed = 2;
    }
}
